(this["webpackJsonpreact-lap"]=this["webpackJsonpreact-lap"]||[]).push([[0],Array(22).concat([function(e,t,a){e.exports=a(62)},,,,,function(e,t,a){},,function(e,t,a){},function(e,t,a){},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(13),l=a.n(c),o=(a(27),a(1)),s=a.n(o),u=a(4),i=a(2),m=(a(29),a(9)),d=r.a.createContext(null),f=r.a.createContext(),p=function(){return Object(n.useContext)(d)},b=function(){return Object(n.useContext)(f)},E=function(e){var t=e.children,a=Object(n.useState)(null),c=Object(i.a)(a,2),l=c[0],o=c[1];return r.a.createElement(d.Provider,{value:l},r.a.createElement(f.Provider,{value:o},t))},v=function(e){var t=e.children,a=e.userType,n=void 0!==a&&a,c=p(),l=Boolean(!n||c.type===n);return c&&l&&r.a.createElement(r.a.Fragment,null,t)},h=(a(30),function(){return r.a.createElement("header",{className:"navHeader"},r.a.createElement("nav",{className:"navBar"},r.a.createElement("div",{className:"navLogo"},"UR"),r.a.createElement("ul",{className:"navList"},r.a.createElement(v,null,r.a.createElement("li",{className:"navItem"},r.a.createElement(m.b,{className:"navLink",to:"/home"},"Home")),r.a.createElement("li",{className:"navItem"},r.a.createElement(m.b,{className:"navLink",to:"/view"},"View")),r.a.createElement("li",{className:"navItem"},r.a.createElement(m.b,{className:"navLink",to:"/account"},"Account"))))))}),j=a(5),O=(a(36),a(37),a(38),function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],r=t[1];return{show:a,toggleModal:function(){r((function(e){return!e}))},hideModal:function(){r(!1)},showModal:function(){r(!0)}}}),g=function(e){var t=e.children,a=e.show,c=void 0!==a&&a,o=e.onHide,s=e.Component,u=void 0===s?null:s,m=Object(n.useState)(!1),d=Object(i.a)(m,2),f=d[0],p=d[1];Object(n.useEffect)((function(){!f&&c&&p(!0)}),[c,f]);return f&&l.a.createPortal(r.a.createElement("div",{onClick:function(e){e.target.classList.contains("modalWrapper")&&"function"===typeof o&&o()},className:"".concat(c?"":"hide"," modalWrapper")},r.a.createElement("button",{onClick:o,className:"closeBtn"},"Close"),"function"===typeof u?r.a.createElement(u,null):t),document.getElementById("modal-root"))},N=a(6),w=a(10),k=a(3),y={department:{name:{label:"Name",type:"text",value:""}},module:{name:{label:"Name",type:"text",value:""},code:{label:"code",type:"text",value:""},credits:{label:"credits",type:"number",value:""},teacher_id:{label:"Teacher",type:"select",options:"teachers@index"},foculty_id:{label:"Department",type:"select",options:"departments@index"}},student:{name:{label:"Name",type:"text",value:""},email:{label:"E-mail",type:"email",value:""},phone:{label:"Phone",type:"number"},index_number:{label:"Index Number",type:"text",value:""},password:{label:"Password",type:"password",value:""},password_confirmation:{label:"Re-Enter Password",type:"password",value:""},foculty_id:{label:"Department",type:"select",options:"departments@index",value:""}},teacher:{name:{label:"Name",type:"text",value:""},email:{label:"E-mail",type:"email",value:""},phone:{label:"Phone",type:"number"},password:{label:"Password",type:"password",value:""},password_confirmation:{label:"Re-Enter Password",type:"password",value:""}},marks:{module_id:{label:"Module",type:"select",options:"modules@index",value:""},student_id:{label:"Student",type:"select",options:"modules@listStudents@module_id",value:""},formative:{label:"Formative Assessment",type:"number",value:""},summative:{label:"Summative Assessment",type:"number",value:""},academic_year:{label:"Academic Year",type:"select",value:"",options:[{label:"2018-2019",value:"2018-2019"},{label:"2019-2020",value:"2019-2020"},{label:"2020-2021",value:"2020-2021"},{label:"2021-2022",value:"2021-2022"}]},semester:{label:"Semester",type:"select",options:[{label:"I",value:"I"},{label:"II",value:"II"}],value:""}},login:{email:{label:"E-mail",type:"email"},password:{label:"Password",type:"password"},user_type:{label:"Account Type",type:"select",options:[{label:"Admin",value:"admin"},{label:"Teacher",value:"teacher"},{label:"Student",value:"student"}],value:"admin"},remember_me:{label:"Remember-me",type:"checkbox"}},register:{name:{label:"Name",type:"text"},email:{label:"E-mail",type:"email"},password:{label:"Password",type:"password"},password_confirmation:{label:"Re-enter Password",type:"password"}},password:{current_password:{label:"Current Password",type:"password"},password:{label:"New Password",type:"password"},password_confirmation:{label:"Re-enter New Password",type:"password"}},change_info:{name:{label:"New Name",type:"text"},email:{label:"New E-mail",type:"email"},phone:{label:"Phone",type:"number"}}},x=function(e){var t=Object(k.a)({},e);return Object.keys(e).forEach((function(a){t[a]=Object(k.a)({},e[a]),Object.keys(e[a]).forEach((function(n){var r=e[a][n];e[a][n].errors=r.errors||[],e[a][n].value=r.value||"",e[a][n].type=r.type||"text",t[a][n]=Object(k.a)({},e[a][n])}))})),t},C=function(e){if(!(e in y))return null;var t=Object(k.a)({},y[e]);return Object.keys(t).forEach((function(a){t[a]=Object(k.a)({},y[e][a])})),t},S=x(y),M=function(){var e=function(){return localStorage.getItem("_TOKEN_KEY")};return{getToken:e,saveToken:function(e){localStorage.setItem("_TOKEN_KEY",e)},removeToken:function(){localStorage.removeItem("_TOKEN_KEY")},hasToken:function(){return Boolean(e())}}},I=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],r=t[1],c=M(),l=c.hasToken,o=c.getToken,m=function(){var e=Object(u.a)(s.a.mark((function e(t){var a,n,c=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:{},r(!0),n=l()?{Authorization:"Bearer ".concat(o())}:{},a.headers=Object(k.a)(Object(k.a)({Accept:"application/json","Content-Type":"application/json"},n),a.headers||{}),e.abrupt("return",fetch(t,Object(k.a)({},a)).then(function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(!1),t.ok||console.warn(t),e.abrupt("return",Promise.resolve(t));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){r(!1),alert("Something went wrong!")})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{loading:a,get:function(){var e=Object(u.a)(s.a.mark((function e(t){var a,n=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.length>1&&void 0!==n[1]?n[1]:{},e.next=3,m(t,a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),post:function(){var e=Object(u.a)(s.a.mark((function e(t){var a,n=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.length>1&&void 0!==n[1]?n[1]:{},e.next=3,m(t,Object(k.a)(Object(k.a)({},a),{},{method:"POST"}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),put:function(){var e=Object(u.a)(s.a.mark((function e(t){var a,n=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.length>1&&void 0!==n[1]?n[1]:{},e.next=3,m(t,Object(k.a)(Object(k.a)({},a),{},{method:"PUT"}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),del:function(){var e=Object(u.a)(s.a.mark((function e(t){var a,n=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.length>1&&void 0!==n[1]?n[1]:{},e.next=3,m(t,Object(k.a)(Object(k.a)({},a),{},{method:"DELETE"}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},D=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=I(),n=a.loading,r=a.get,c=a.post,l=a.put,o=a.del,s=function(t){return"/api"+"/".concat("function"===typeof e?e():e)+t};return Object(k.a)({loading:n,url:s,index:function(){return r(s("/"))},show:function(e){return r(s("/".concat(e)))},store:function(e){return c(s("/"),{body:e})},update:function(e,t){return l(s("/".concat(e)),{body:t})},destroy:function(e){return o(s("/".concat(e)))}},t)},B=function(){var e=I(),t=e.loading,a=e.get,n=e.post;return{loading:t,login:function(e){return n("/api/auth/login",{body:e})},logout:function(){return n("/api/auth/logout")},currentUser:function(){return a("/api/auth/user")}}},_=function(){var e=I(),t=e.loading,a=e.get,n=D("departments");return Object(k.a)(Object(k.a)({},n),{},{loading:t||n.loading,listModules:function(e){var t=n.url("/".concat(e,"/modules"));return a(t)}})},H=function(){var e=I(),t=e.loading,a=e.post,n=e.get,r=D("students");return Object(k.a)(Object(k.a)({},r),{},{loading:t||r.loading,storeMarks:function(e,t){return a(r.url("/".concat(e,"/marks")),{body:t})},listMarks:function(e){return n(r.url("/".concat(e,"/marks")))}})},T=function(){var e=I(),t=e.loading,a=e.get,n=D("teachers");return Object(k.a)(Object(k.a)({},n),{},{loading:t||n.loading,listModules:function(e){return a(n.url("/".concat(e,"/modules")))}})},W=function(){var e=I(),t=e.loading,a=e.post,n=e.get,r=D("modules");return Object(k.a)(Object(k.a)({},r),{},{loading:t||r.loading,storeMarks:function(e,t){return a(r.url("/".concat(e,"/marks")),{body:t})},listStudents:function(e){return n(r.url("/".concat(e,"/students")))},listMarks:function(e){return n(r.url("/".concat(e,"/marks")))}})},P=function(){var e=D("marks");return Object(k.a)({},e)},U=D,L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=Object(n.useState)({}),r=Object(i.a)(a,2),c=r[0],l=r[1],o=Object(n.useState)(""),m=Object(i.a)(o,2),d=m[0],f=m[1],p=Object(n.useState)(C((null===e||void 0===e?void 0:e.fields)||"")||t),b=Object(i.a)(p,2),E=b[0],v=b[1],h=U((null===e||void 0===e?void 0:e.api)||""),j=h.loading,O=h.store,g=h.update,y=function(e,t){v(Object(k.a)(Object(k.a)({},E),{},Object(w.a)({},e,Object(k.a)(Object(k.a)({},E[e]),{},{value:t}))))},x=function(){var e=Object(u.a)(s.a.mark((function e(t){var a,n,r,l=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=!(l.length>1&&void 0!==l[1])||l[1],e.next=3,t(JSON.stringify(c));case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,n.ok?(f(c.message||"Operation Successful!"),a&&B()):H(r),e.abrupt("return",Promise.resolve(r));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(O);case 2:return t=e.sent,e.abrupt("return",Promise.resolve(t));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(e,t){console.log(E[e]),v(Object(k.a)(Object(k.a)({},E),{},Object(w.a)({},e,Object(k.a)(Object(k.a)({},E[e]),{},{errors:Object(N.a)(E[e].errors).push(t)}))))},I=function(e){return Object(u.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",x((function(t){return g(e,t)})));case 1:case"end":return t.stop()}}),t)})))},D=function(e){var t=Object(k.a)({},E);Object.keys(t).forEach((function(a){a in e?t[a].value=e[a]||"":delete t[a]})),v(t)},B=function(){var e=Object(k.a)({},E);Object.keys(e).forEach((function(t){e[t].errors=[],e[t].value=""})),v(e)},_=function(e,t,a){v(Object(k.a)(Object(k.a)({},E),{},Object(w.a)({},e,Object(k.a)(Object(k.a)({},E[e]),{},Object(w.a)({},t,a)))))};function H(e){e.message&&f(e.message);var t=Object(k.a)({},E);e.errors&&Object.keys(t).forEach((function(a){t[a].errors=e.errors[a]||[]})),v(t)}return Object(n.useEffect)((function(){var e={};Object.keys(E).forEach((function(t){e[t]=E[t].value})),l(e)}),[E]),{msg:d,data:c,fields:E,loading:j,send:x,create:S,update:I,populateFields:D,reset:B,setValue:y,setError:M,setMsg:f,errorHandler:H,setAttr:_}},A=(a(39),function(e){var t=e.children,a=e.show,c=e.Component,l=void 0===c?null:c,o=Object(n.useState)(!1),s=Object(i.a)(o,2),u=s[0],m=s[1];return Object(n.useEffect)((function(){!u&&a&&m(!0)}),[a,u]),u&&r.a.createElement("div",{className:"".concat(a?"show":"hide"," hideWrapper")},"function"===typeof l?r.a.createElement(l,null):t)}),F=function(){var e=Object(n.useState)({}),t=Object(i.a)(e,2),a=t[0],c=t[1],l=I(),o=l.loading,m=l.get,d=Object(n.useState)([]),f=Object(i.a)(d,2),p=f[0],b=f[1],E=Object(n.useState)(!1),v=Object(i.a)(E,2),h=v[0],j=v[1],O=Object(n.useRef)(!1),g=function(){var e=Object(u.a)(s.a.mark((function e(t){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,c(n),j(!0),O.current=!0;case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){"object"===typeof a.data&&b((function(e){return[].concat(Object(N.a)(e.filter((function(e){return!a.data.some((function(t){return t.id===e.id}))}))),Object(N.a)(a.data))}))}),[a]),{loaded:h,data:a,setItems:b,items:p,loadItems:g,prependItem:function(e){(null===e||void 0===e?void 0:e.id)&&c(Object(k.a)(Object(k.a)({},a),{},{data:[e].concat(Object(N.a)(p))}))},appendItem:function(e){var t=a.data||[];c(Object(k.a)(Object(k.a)({},a),{},{data:[].concat(Object(N.a)(t),[e])}))},changeItem:function(e,t){var n=Object(N.a)(a.data||[]),r=n.findIndex((function(t){return t.id===e.id}));n.splice(r,1,t),b((function(t){return t.filter((function(t){return t.id!==e.id}))})),c(Object(k.a)(Object(k.a)({},a),{},{data:n}))},removeItem:function(e){var t=Object(N.a)(a.data||[]).filter((function(t){return t.id!==e.id}));b((function(t){return t.filter((function(t){return t.id!==e.id}))})),c(Object(k.a)(Object(k.a)({},a),{},{data:t}))},MoreBtn:function(){return r.a.createElement("div",null,o&&r.a.createElement("span",{className:"loader"}),!o&&a.next_page_url&&r.a.createElement("button",{onClick:function(){return e=a.next_page_url,j(!1),void g((function(){return Promise.resolve(m(e))}));var e},className:"btn btnSm moreBtn",style:{margin:".25rem .05rem"}},"Load More"))},setData:c}},V=function(e){var t=e.fields,a=e.setAttr,c=e.field,l=e.onChange,o="string"===typeof c.options?c.options.split("@")[0]:"",m=I(),d=m.loading,f=m.get,p=Object(n.useState)(!1),b=Object(i.a)(p,2),E=b[0],v=b[1],h=F(),j=h.loadItems,O=h.data,g=h.setItems,w=h.items,k=h.setData,y=Object(n.useState)([]),x=Object(i.a)(y,2),C=x[0],S=x[1],M=function(e){return e?{"":{},modules:W,marks:P,departments:_,students:H,teachers:T}[e]():{}}(o);Object(n.useEffect)((function(){"object"===typeof c.options?S(c.options):S(Object(N.a)(w))}),[w,c]),Object(n.useEffect)((function(){g(O.data||[])}),[O,g]);var D=Object(n.useCallback)((function(){if(!E&&o&&M){if("string"===typeof c.options){var e=c.options.split("@"),n=Object(i.a)(e,3),r=n[1],l=n[2],s=(l?l.split(","):[]).map((function(e){var n=t[e].value,r="Please enter ".concat(e," first"),l=Object.keys(t).find((function(e){return t[e].label===c.label}));return""!==n||c.errors.some((function(e){return e===r}))||a(l,"errors",[].concat(Object(N.a)(c.errors),[r])),""!==n&&c.errors.includes(r)&&a(l,"errors",c.errors.filter((function(e){return e!==r}))),n}));if(s.some((function(e){return""===e})))return;j((function(){return M[r].apply(M,Object(N.a)(s))}))}else S(c.options);v(!0)}}),[E,t,M,o,c,a,j]);function B(){return U.apply(this,arguments)}function U(){return(U=Object(u.a)(s.a.mark((function e(){var t,a,n,r,c=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]&&c[0],a=t?O.prev_page_url:O.next_page_url,e.next=4,f(a);case 4:return n=e.sent,e.next=7,n.json();case 7:r=e.sent,k(r);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",null,"Select ",c.label),r.a.createElement("div",{className:"selectBtnWrapper"},r.a.createElement(A,{show:M.loading||d}," ",r.a.createElement("span",{className:"loader"})),!d&&r.a.createElement(r.a.Fragment,null,O.prev_page_url&&r.a.createElement("button",{type:"button",onClick:function(){return B(!0)},className:"btn btnSm prevBtn"},"<< prev"),E&&r.a.createElement("button",{type:"button",onClick:function(){v(!1),D()},className:"btn btnSm refeshBtn"},"Refresh"),O.next_page_url&&r.a.createElement("button",{type:"button",onClick:function(){return B(!1)},className:"btn btnSm nextBtn"},"next >>"))),r.a.createElement("select",{onClick:D,value:c.value,onChange:function(e){return l(e.target.value)}},r.a.createElement("option",{value:""},"..."),C.map((function(e){return r.a.createElement("option",{key:e.label||e.id,value:e.value||e.id},e.label||e.name)}))))},R=function(e){var t=e.field,a=e.onChange;return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",null,t.label),r.a.createElement("input",{value:t.value,placeholder:"Enter ".concat(t.label),type:t.type,onChange:function(e){return a(e.target.value)}}))},K=function(e){var t=e.field,a=e.onChange,n=Math.random();return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:n},t.label),r.a.createElement("input",{id:n,value:t.value,defaultChecked:!!t.value,placeholder:"Enter ".concat(t.label),type:t.type,onChange:function(e){return a(e.target.checked)}}))},Y=function(e){var t=e.fields,a=e.setError,n=e.setAttr,c=e.setValue;return r.a.createElement(r.a.Fragment,null,Object.keys(Object(k.a)({},t)).map((function(e){return r.a.createElement("div",{key:e,className:"".concat(Boolean(t[e].errors.length)?"error":""," ").concat(t[e].type," inputWrapper")},function(e,l){var o={field:l,setError:a,setAttr:n,fields:t,onChange:function(t){return c(e,t)}};switch(l.type){case"select":return r.a.createElement(V,o);case"checkbox":return r.a.createElement(K,o);default:return r.a.createElement(R,o)}}(e,t[e]),Boolean(t[e].errors.length)&&r.a.createElement("div",{className:"errorWrapper"},t[e].errors.map((function(e){return r.a.createElement("div",{key:e,className:"error"},e)}))))})))},J=function(e){var t=e.modelName,a=e.onDone,c=e.action,l=void 0===c?"Create":c,o=e.instance;"string"===typeof t&&(t={label:t[0].toUpperCase()+t.slice(1).toLowerCase(),fields:t.toLowerCase(),api:t.toLowerCase()+"s"});var m=L(t),d=m.setValue,f=m.setError,p=m.setAttr,b=m.loading,E=m.fields,v=m.create,h=m.update,j=m.populateFields,O=Object(n.useState)(!1),g=Object(i.a)(O,2),N=g[0],w=g[1];Object(n.useEffect)((function(){o&&!N&&(j(o),w(!0))}),[o,j,N]);var k=function(){var e=Object(u.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="create"===l.toLocaleLowerCase()?v:h(o.id),e.next=3,t();case 3:(n=e.sent).errors||a&&a(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("form",null,r.a.createElement("h2",{className:"formHeader"},t.label),r.a.createElement(Y,{setAttr:p,setError:f,setValue:d,fields:E}),r.a.createElement("button",{className:"btn formSubmitBtn",onClick:function(e){e.preventDefault(),k()}},b?"...":"".concat(l," ").concat(t.label)))},z=function(e){var t=e.children,a=e.userTypes,n=void 0===a?[]:a,c=p();return c&&n.includes(c.type)&&r.a.createElement(r.a.Fragment,null,t)},q=function(e){var t=e.onCreate,a=O(),n=a.show,c=a.hideModal,l=a.toggleModal;return r.a.createElement(z,{userTypes:["admin","teacher"]},r.a.createElement("div",{className:"markCreateWrapper"},r.a.createElement(g,{show:n,onHide:c},r.a.createElement(J,{onDone:function(e){return t&&t(e)},modelName:{label:"Marks",fields:"marks",api:"marks"}})),r.a.createElement("button",{onClick:l,className:"markCreateBtn btn"},"Record Marks")))},G=(a(40),function(e){var t=e.children,a=e.headers;return r.a.createElement("table",{className:"markTable"},r.a.createElement("thead",null,r.a.createElement("tr",null,a,r.a.createElement("th",null,"Module Code"),r.a.createElement("th",null,"Module Name"),r.a.createElement("th",null,"Semester"),r.a.createElement("th",null,"Year"),r.a.createElement("th",null,"Credits"),r.a.createElement("th",null,"Formative Ass. /50"),r.a.createElement("th",null,"Summative Ass. /50"),r.a.createElement("th",null,"Total /100"),r.a.createElement("th",null,"Decision"))),r.a.createElement("tbody",null,t))}),Q=function(e){e.student;var t=e.mark,a=e.Data,c=Object(n.useState)({}),l=Object(i.a)(c,2),o=l[0],m=l[1],d=Object(n.useState)(!1),f=Object(i.a)(d,2),p=f[0],b=f[1],E=W(),v=E.loading,h=E.show;return Object(n.useEffect)((function(){p||(h(t.module_id).then(function(){var e=Object(u.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:a=e.sent,m(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),b(!0))}),[o,t,h,p]),v?r.a.createElement("tr",{className:"loader"}):r.a.createElement("tr",null,a,r.a.createElement("td",null,o.code),r.a.createElement("td",null,o.name),r.a.createElement("td",null,t.semester||0),r.a.createElement("td",null,t.academic_year||0),r.a.createElement("td",null,o.credits||0),r.a.createElement("td",null,t.formative||0),r.a.createElement("td",null,t.summative||0),r.a.createElement("td",null,t.total||0),r.a.createElement("td",null,t.decision?"Pass":"Retake"))},X=function(e){var t=e.student,a=H(),c=a.loading,l=a.listMarks,o=F(),s=o.loadItems,u=o.items,m=Object(n.useState)(!1),d=Object(i.a)(m,2),f=d[0],p=d[1];return Object(n.useEffect)((function(){f||(s((function(){return l(t.id)})),p(!0))}),[f,l,t,s]),r.a.createElement("div",{className:"showWrapper marksShowWrapper"},r.a.createElement("h2",null,t.name),c&&r.a.createElement("span",{className:"loader"}),c||0!==u.length?"":"No marks yet.",!c&&u.length?r.a.createElement("div",{className:"marksListWrapper"},r.a.createElement(G,null,u.map((function(e){return r.a.createElement(Q,{student:t,mark:e,key:e.id})})))):"")},Z=(a(41),function(e){var t=e.mark,a=H(),c=a.loading,l=a.show,o=Object(n.useState)({}),m=Object(i.a)(o,2),d=m[0],f=m[1],p=Object(n.useState)(!1),b=Object(i.a)(p,2),E=b[0],v=b[1];return Object(n.useEffect)((function(){E||(l(t.student_id).then(function(){var e=Object(u.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:a=e.sent,f(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),v(!0))}),[E,l,t]),c?r.a.createElement("tr",{className:"loader"}):E&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Q,{Data:r.a.createElement("td",null,d.name),student:d,mark:t,key:t.id}))}),$=(a(42),function(e){var t=e.marks;return r.a.createElement("div",{className:"marksListWrapper"},!t.length&&r.a.createElement("p",null,"No marks found"),t.length?r.a.createElement(G,{headers:r.a.createElement("th",null,"Names")},t.map((function(e){return r.a.createElement(Z,{mark:e,key:e.id})}))):"")}),ee=function(e){var t=e.onData,a=e.loading,n=e.children;return r.a.createElement("form",{className:"markFilterForm"},n,r.a.createElement("button",{onClick:function(e){e.preventDefault(),t()},className:"viewMarksBtn btn"},a?"...":"View marks"))};var te=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],c=t[1],l=I(),o=l.loading,s=l.get,u=P().url,m=F(),d=m.loadItems,f=m.setItems,p=m.items,b=L("",x({filters:{academic_year:{label:"Academic Year",type:"select",value:"",options:[{label:"2018-2019",value:"2018-2019"},{label:"2019-2020",value:"2019-2020"},{label:"2020-2021",value:"2020-2021"},{label:"2021-2022",value:"2021-2022"}]},semester:{label:"Semester",type:"select",options:[{label:"I",value:"I"},{label:"II",value:"II"}],value:""}}}).filters),E=b.data,v=b.setValue,h=b.fields,j=Object(n.useState)(!1),O=Object(i.a)(j,2),g=O[0],N=O[1];return Object(n.useEffect)((function(){if(!a&&g){var e=function(e){var t="";for(var a in e)Object.hasOwnProperty.call(e,a)&&(t+=(t.length?"&":"")+a.toString()+"="+e[a].toString());return"?"+t}(E);d((function(){return s(u(e))})),c(!0)}}),[d,s,E,u,a,g]),r.a.createElement("div",{className:"markViewWrapper"},r.a.createElement(q,null),r.a.createElement(ee,{loading:o,onData:function(){if(!E.academic_year||!E.semester)return g&&N(!1);f([]),c(!1),N(!0)}},r.a.createElement(Y,{fields:h,setValue:v})),!g&&r.a.createElement("p",{style:{fontSize:"1.7rem",color:"var(--dark-color-op)"}},"Select year and semester to view marks for."),o?r.a.createElement("span",{className:"loader"}):g&&r.a.createElement($,{marks:p}))},ae=(a(43),function(){return r.a.createElement("div",null,r.a.createElement(te,null))}),ne=(a(44),a(45),function(){var e=p(),t=b(),a=function(){var e=I(),t=e.loading,a=e.post;return{loading:t,changeUserInfo:function(e){return a("/api"+"/auth/user/change-info",{body:e})}}}(),c=a.loading,l=a.changeUserInfo,o=Object(n.useState)(!1),m=Object(i.a)(o,2),d=m[0],f=m[1],E=L("",S.change_info),v=E.msg,h=E.fields,j=E.setValue,O=E.setAttr,g=E.send,N=E.setError,w=E.populateFields;Object(n.useEffect)((function(){d||(w(e),f(!0))}),[w,e,d]);var k=function(){var e=Object(u.a)(s.a.mark((function e(a){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,g(l,!1);case 3:n=e.sent,t(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("form",{action:""},r.a.createElement("h2",{className:"formHeader"},"Change User Info"),v&&r.a.createElement("h5",{className:"formMsg textDanger"},v),r.a.createElement(Y,{fields:h,setValue:j,setError:N,setAttr:O}),r.a.createElement("button",{onClick:k,className:"btn formSubmitBtn"},c?"...":"Change Info"))}),re=function(){var e=function(){var e=I(),t=e.loading,a=e.post;return{loading:t,changePassword:function(e){return a("/api"+"/auth/user/change-password",{body:e})}}}(),t=e.loading,a=e.changePassword,n=L("",S.password),c=n.msg,l=n.fields,o=n.setValue,s=n.setAttr,u=n.send,i=n.setError;return r.a.createElement("form",{action:""},r.a.createElement("h2",{className:"formHeader"},"Change Password"),c&&r.a.createElement("h5",{className:"formMsg textDanger"},c),r.a.createElement(Y,{fields:l,setValue:o,setError:i,setAttr:s}),r.a.createElement("button",{onClick:function(e){e.preventDefault(),u(a)},className:"btn formSubmitBtn"},t?"...":"Change Password"))},ce=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),o=Object(i.a)(l,2),s=o[0],u=o[1],m=b(),d=M().removeToken,f=Object(j.g)(),E=p(),v=function(e){c(!0),u(e)};return r.a.createElement("div",null,r.a.createElement(g,{onHide:function(){c((function(e){return!e}))},show:a},r.a.createElement(A,{show:"userinfo"===s,Component:ne}),r.a.createElement(A,{show:"password"===s,Component:re})),r.a.createElement("div",{className:"profileWrapper"},r.a.createElement("div",{className:"userAvatar"},null===E||void 0===E?void 0:E.name[0].toUpperCase()),r.a.createElement("div",{className:"userInfoWrapper"},r.a.createElement("div",{className:"userName"},r.a.createElement("span",null,E.name)),r.a.createElement("div",{className:"userRole"},r.a.createElement("span",{style:{textTransform:"capitalize"}},E.type))),r.a.createElement("div",{className:"profileBtns"},r.a.createElement("button",{onClick:function(){d(),m(null),f.push("/login")},className:"btn"},"Logout"))),r.a.createElement("div",{className:"personalInfoWrapper"},r.a.createElement("h2",null,"Personal Info"),r.a.createElement("div",{className:"personalInfo"},r.a.createElement("div",{className:"info"},r.a.createElement("span",{className:"infoKey"},"E-mail: "),r.a.createElement("span",{className:"infoValue"},E.email)),r.a.createElement("div",{className:"info"},r.a.createElement("span",{className:"infoKey"},"Phone: "),r.a.createElement("span",{className:"infoValue"},E.phone||"None"))),r.a.createElement("button",{onClick:function(e){return v("userinfo")},className:"btn perosonalInfoBtn"},"Change Info"),r.a.createElement("button",{onClick:function(e){return v("password")},className:"btn perosonalInfoBtn"},"Change Password")))},le=(a(46),a(47),a(48),a(49),function(e){return r.a.createElement(v,Object.assign({},e,{userType:"admin"}))}),oe=(a(50),a(51),function(e){var t=e.tags;return r.a.createElement("div",{className:"tagList"},t.map((function(e){return r.a.createElement("span",{key:e.name,className:"tag"},e.name)})))}),se=function(e){var t=e.details,a=void 0===t?{}:t;return r.a.createElement("div",{className:"detailsWrapper"},r.a.createElement("h4",{className:"detailsHeader"},"Details"),!Object.keys(a).length&&r.a.createElement("p",null,"No details."),r.a.createElement("div",{className:"detailsList"},Object.keys(a).map((function(e){var t=a[e];return r.a.createElement("div",{key:e,className:"detail"},r.a.createElement("span",{className:"detailKey"},e),r.a.createElement("span",{className:"detailValue"},t.tags&&r.a.createElement(oe,{tags:t.tags})))}))))},ue=function(e){var t=e.student,a=e.onUpdate,c=e.onDelete,l=_(),o=l.loading,m=l.show,d=Object(n.useState)(),f=Object(i.a)(d,2),p=f[0],b=f[1],E=Object(n.useState)(!1),v=Object(i.a)(E,2),h=v[0],j=v[1];return Object(n.useEffect)((function(){var e={tags:[{name:t.email},{name:t.phone}]};b((function(t){return Object(k.a)(Object(k.a)({},t),{},{contact:e})}))}),[t]),Object(n.useEffect)((function(){h||(m(t.foculty_id).then(function(){var e=Object(u.a)(s.a.mark((function e(t){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:a=e.sent,n={tags:[{name:a.name}]},b((function(e){return Object(k.a)(Object(k.a)({},e),{},{department:n})}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),j(!0))}),[h,m,t]),r.a.createElement("div",{className:"showWrapper"},r.a.createElement("h2",{className:"showHeader"},t.name),!o&&r.a.createElement(se,{details:p}),o&&r.a.createElement("span",{className:"loader"}),r.a.createElement(le,null,r.a.createElement("div",{className:"actionsWrapper"},r.a.createElement("h4",{className:"actionsHeader"},"Actions"),r.a.createElement("div",{className:"actionsList"},r.a.createElement("button",{onClick:function(){return a&&a()},className:"actionBtn btnSuccess btn"},"Update"),r.a.createElement("button",{onClick:c,className:"actionBtn btnDanger btn"},"Delete")))))},ie=function(e){var t=e.student,a=e.onDelete,n=e.onUpdate,c=H(),l=c.loading,o=c.destroy,i=O(),m=i.show,d=i.toggleModal,f=i.hideModal,p=O(),b=p.show,E=p.showModal,v=p.hideModal,h=O(),j=h.show,N=h.toggleModal,w=h.hideModal,k=function(){var e=Object(u.a)(s.a.mark((function e(){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(t.id);case 2:return n=e.sent,e.next=5,n.json();case 5:r=e.sent,n.ok&&r&&a(t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"student"},!l&&r.a.createElement(r.a.Fragment,null,r.a.createElement(g,{onHide:f,show:m},r.a.createElement(ue,{onDelete:k,onUpdate:function(){f(),E()},student:t})),r.a.createElement(g,{show:b,onHide:v},r.a.createElement(J,{onDone:n,modelName:"student",action:"Update",instance:t})),r.a.createElement(g,{show:j,onHide:w},r.a.createElement(X,{student:t})),r.a.createElement("span",{onClick:d,className:"studentName"},t.name),r.a.createElement("div",{className:"studentBtns"},r.a.createElement("button",{onClick:N,className:"btn viewMarksBtn btnSm"},"View Marks"))),l&&r.a.createElement("span",{className:"loader"}))},me=function(){var e=O(),t=e.show,a=e.hideModal,c=e.toggleModal,l=H(),o=l.index,s=l.loading,u=F(),m=u.loadItems,d=u.items,f=u.changeItem,p=u.prependItem,b=u.removeItem,E=u.MoreBtn,v=Object(n.useState)(!1),h=Object(i.a)(v,2),j=h[0],N=h[1];Object(n.useEffect)((function(){j||(m(o),N(!0))}),[m,o,j]);return r.a.createElement("div",{className:"studentWrapper"},r.a.createElement(le,null,r.a.createElement(g,{onHide:a,show:t},r.a.createElement(J,{modelName:"student",onDone:function(e){a(),p(e)}}))),r.a.createElement("div",{className:"studentHeader"},r.a.createElement("h2",{className:"studentHeader"},"Students"),r.a.createElement(le,null,r.a.createElement("button",{onClick:c,className:"btn"},"Create Student"))),r.a.createElement("div",{className:"studentList"},s&&r.a.createElement("div",{className:"student"},r.a.createElement("span",{className:"loader"})),!s&&!d.length&&r.a.createElement("p",null,"No students found"),d.map((function(e){return r.a.createElement(ie,{onUpdate:function(t){return f(e,t)},onDelete:b,student:e,key:e.id})}))),r.a.createElement(E,null))},de=(a(52),a(53),a(54),function(e){var t=e.teacher,a=e.onUpdate,c=e.onDelete,l=Object(n.useState)({}),o=Object(i.a)(l,2),m=o[0],d=o[1],f=T(),p=f.loading,b=f.listModules,E=Object(n.useState)(!1),v=Object(i.a)(E,2),h=v[0],j=v[1];return Object(n.useEffect)((function(){var e={tags:[{name:t.email},{name:t.phone}]};d((function(t){return Object(k.a)(Object(k.a)({},t),{},{contact:e})}))}),[t]),Object(n.useEffect)((function(){h||(b(t.id).then(function(){var e=Object(u.a)(s.a.mark((function e(t){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:a=e.sent,n=(n=a.data.map((function(e){return{name:e.name}}))).length?{modules:{tags:n}}:{},d((function(e){return Object(k.a)(Object(k.a)({},e),n)}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),j(!0))}),[t,h,b]),r.a.createElement("div",{className:"showWrapper"},r.a.createElement("h2",{className:"showHeader"},t.name),p&&r.a.createElement("span",{className:"loader"}),!p&&r.a.createElement(se,{details:m}),r.a.createElement(le,null,r.a.createElement("h4",{className:"actionsHeader"},"Actions"),r.a.createElement("div",{className:"actionsWrapper"},r.a.createElement("div",{className:"actionsList"},r.a.createElement("button",{onClick:function(e){return a&&a()},className:"actionBtn btnSuccess btn"},"Update"),r.a.createElement("button",{onClick:function(e){return c&&c()},className:"actionBtn btnDanger btn"},"Delete")))))}),fe=function(e){var t=e.teacher,a=e.onUpdate,n=e.onDelete,c=T(),l=c.loading,o=c.destroy,i=O(),m=i.show,d=i.toggleModal,f=i.hideModal,p=O(),b=p.show,E=p.showModal,v=p.hideModal,h=function(){var e=Object(u.a)(s.a.mark((function e(){var a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(t.id);case 2:return a=e.sent,e.next=5,a.json();case 5:r=e.sent,a.ok&&r&&n(t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"teacher"},l&&r.a.createElement("span",{className:"loader"}),!l&&r.a.createElement(r.a.Fragment,null,r.a.createElement(g,{show:m,onHide:f},r.a.createElement(de,{onDelete:h,onUpdate:function(){f(),E()},teacher:t})),r.a.createElement(g,{show:b,onHide:v},r.a.createElement(J,{onDone:a,modelName:"teacher",action:"Update",instance:t})),r.a.createElement("span",{onClick:d,className:"teacherName"},t.name)))},pe=function(){var e=O(),t=e.show,a=e.toggleModal,c=e.hideModal,l=T(),o=l.loading,s=l.index,u=Object(n.useState)(!1),m=Object(i.a)(u,2),d=m[0],f=m[1],p=F(),b=p.loadItems,E=p.items,v=p.changeItem,h=p.removeItem,j=p.prependItem,N=p.MoreBtn;Object(n.useEffect)((function(){d||(b(s),f(!0))}),[b,s,d]);return r.a.createElement("div",{className:"teacherWrapper"},r.a.createElement(le,null,r.a.createElement(g,{onHide:c,show:t},r.a.createElement(J,{onDone:function(e){c(),j(e)},modelName:{fields:"teacher",label:"Teacher",api:"teachers"}}))),r.a.createElement("div",{className:"teacherHeader"},r.a.createElement("h2",null,"Teachers"),r.a.createElement(le,null,r.a.createElement("button",{onClick:a,className:"btn"},"Create Teacher"))),r.a.createElement("div",{className:"teacherList"},o&&r.a.createElement("div",{className:"teacher"},r.a.createElement("span",{className:"loader"})),!o&&!E.length&&r.a.createElement("p",null,"No teachers found"),E.map((function(e){return r.a.createElement(fe,{onDelete:h,onUpdate:function(t){return v(e,t)},teacher:e,key:e.id})}))),r.a.createElement(N,null))},be=(a(55),function(e){var t=e.department,a=e.onDelete,n=e.onUpdate;return r.a.createElement("div",{className:"showWrapper"},r.a.createElement("h2",{className:"showHeader"},t.name),r.a.createElement(le,null,r.a.createElement("div",{className:"actionsWrapper"},r.a.createElement("h4",{className:"actionsHeader"},"Actions"),r.a.createElement("div",{className:"actionsList"},r.a.createElement("button",{onClick:function(){return n&&n()},className:"actionBtn btnSuccess btn"},"Update"),r.a.createElement("button",{onClick:function(){return a&&a()},className:"actionBtn btnDanger btn"},"Delete")))))}),Ee=(a(56),function(e){var t=e.dpt,a=e.onDelete,n=e.onUpdate,c=_(),l=c.loading,o=c.destroy,i=O(),m=i.show,d=i.toggleModal,f=i.hideModal,p=O(),b=p.show,E=p.showModal,v=p.hideModal,h=function(){var e=Object(u.a)(s.a.mark((function e(){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(t.id);case 2:return n=e.sent,e.next=5,n.json();case 5:r=e.sent,n.ok&&r&&a(t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"dpt"},l?r.a.createElement("span",{className:"loader"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(g,{onHide:f,show:m},r.a.createElement(be,{onDelete:h,onUpdate:function(){f(),E()},department:t})),r.a.createElement(g,{show:b,onHide:v},r.a.createElement(J,{onDone:n,modelName:"department",action:"Update",instance:t})),r.a.createElement("span",{onClick:d,className:"dptName"},t.name)))}),ve=function(){var e=_(),t=e.loading,a=e.index,c=O(),l=c.show,o=c.hideModal,s=c.toggleModal,u=F(),m=u.loadItems,d=u.items,f=u.changeItem,p=u.prependItem,b=u.MoreBtn,E=u.removeItem,v=Object(n.useState)(!1),h=Object(i.a)(v,2),j=h[0],N=h[1];Object(n.useEffect)((function(){j||(m(a),N(!0))}),[a,m,j]);return r.a.createElement("div",{className:"dptWrapper"},r.a.createElement(le,null,r.a.createElement(g,{show:l,onHide:o},r.a.createElement(J,{onDone:function(e){o(),p(e)},modelName:"department"}))),r.a.createElement("div",{className:"dptHeader"},r.a.createElement("h2",null,"Departments"),r.a.createElement(le,null,r.a.createElement("button",{onClick:s,className:"btn"},"Create department"))),r.a.createElement("div",{className:"dptList"},t&&r.a.createElement("div",{className:"dpt"},r.a.createElement("span",{className:"loader"})),!t&&!d.length&&r.a.createElement("p",null,"No departments found"),d.map((function(e){return r.a.createElement(Ee,{onUpdate:function(t){return f(e,t)},onDelete:E,dpt:e,key:e.id})}))),r.a.createElement(b,null))},he=(a(57),a(58),function(e){var t=e.module,a=e.onUpdate,c=e.onDelete,l=T(),o=l.loading,m=l.show,d=_(),f=d.loading,p=d.show,b=Object(n.useState)(!1),E=Object(i.a)(b,2),v=E[0],h=E[1],j=Object(n.useState)(!1),O=Object(i.a)(j,2),g=O[0],N=O[1],w=Object(n.useState)({}),y=Object(i.a)(w,2),x=y[0],C=y[1];return Object(n.useEffect)((function(){v||(m(t.teacher_id).then(function(){var e=Object(u.a)(s.a.mark((function e(t){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:a=e.sent,n={tags:[{name:a.name}]},C((function(e){return Object(k.a)(Object(k.a)({},e),{},{teacher:n})}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),h(!0))}),[v,m,t]),Object(n.useEffect)((function(){g||(p(t.foculty_id).then(function(){var e=Object(u.a)(s.a.mark((function e(t){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:a=e.sent,n={tags:[{name:a.name}]},C((function(e){return Object(k.a)(Object(k.a)({},e),{},{department:n})}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),N(!0))}),[g,p,t]),r.a.createElement("div",{className:"showWrapper"},r.a.createElement("h2",{className:"showHeader"},t.name),!(o||f)&&r.a.createElement(se,{details:x}),(o||f)&&r.a.createElement("span",{className:"loader"}),r.a.createElement(le,null,r.a.createElement("div",{className:"actionsWrapper"},r.a.createElement("h4",{className:"actionsHeader"},"Actions"),r.a.createElement("div",{className:"actionsList"},r.a.createElement("button",{onClick:function(){return a&&a()},className:"actionBtn btnSuccess btn"},"Update"),r.a.createElement("button",{onClick:function(){return c&&c()},className:"actionBtn btnDanger btn"},"Delete")))))}),je=(a(59),function(e){var t=e.children;return r.a.createElement("table",{className:"markTable"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Student Name"),r.a.createElement("th",null,"Semester"),r.a.createElement("th",null,"Year"),r.a.createElement("th",null,"Formative Ass. /50"),r.a.createElement("th",null,"Summative Ass. /50"),r.a.createElement("th",null,"Total /100"),r.a.createElement("th",null,"Decision"))),r.a.createElement("tbody",null,t))}),Oe=function(e){e.mo;var t=e.mark,a=Object(n.useState)({}),c=Object(i.a)(a,2),l=c[0],o=c[1],m=Object(n.useState)(!1),d=Object(i.a)(m,2),f=d[0],p=d[1],b=H(),E=b.loading,v=b.show;return Object(n.useEffect)((function(){f||(v(t.module_id).then(function(){var e=Object(u.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:a=e.sent,o(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),p(!0))}),[l,t,v,f]),E?r.a.createElement("tr",{className:"loader"}):r.a.createElement("tr",null,r.a.createElement("td",null,l.name),r.a.createElement("td",null,t.semester||0),r.a.createElement("td",null,t.academic_year||0),r.a.createElement("td",null,t.formative||0),r.a.createElement("td",null,t.summative||0),r.a.createElement("td",null,t.total||0),r.a.createElement("td",null,t.decision?"Pass":"Retake"))},ge=function(e){var t=e.module,a=W(),c=a.loading,l=a.listMarks,o=F(),s=o.loadItems,u=o.items,m=Object(n.useState)(!1),d=Object(i.a)(m,2),f=d[0],p=d[1];return Object(n.useEffect)((function(){f||(s((function(){return l(t.id)})),p(!0))}),[f,l,t,s]),r.a.createElement("div",{className:"showWrapper marksShowWrapper"},r.a.createElement("h2",null,t.name),c&&r.a.createElement("span",{className:"loader"}),c||0!==u.length?"":"No marks yet.",!c&&u.length?r.a.createElement("div",{className:"marksListWrapper"},r.a.createElement(je,null,u.map((function(e){return r.a.createElement(Oe,{module:t,mark:e,key:e.id})})))):"")},Ne=function(e){var t=e.module,a=e.onDelete,n=e.onUpdate,c=W(),l=c.loading,o=c.destroy,i=O(),m=i.show,d=i.toggleModal,f=i.hideModal,p=O(),b=p.show,E=p.showModal,v=p.hideModal,h=O(),j=h.show,N=h.toggleModal,w=h.hideModal,k=function(){var e=Object(u.a)(s.a.mark((function e(){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(t.id);case 2:return n=e.sent,e.next=5,n.json();case 5:r=e.sent,n.ok&&r&&a(t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"module"},l&&r.a.createElement("span",{className:"loader"}),!l&&r.a.createElement(r.a.Fragment,null,r.a.createElement(g,{onHide:f,show:m},r.a.createElement(he,{onDelete:k,onUpdate:function(){f(),E()},module:t})),r.a.createElement(g,{show:b,onHide:v},r.a.createElement(J,{onDone:n,modelName:"module",action:"Update",instance:t})),r.a.createElement(g,{show:j,onHide:w},r.a.createElement(ge,{module:t})),r.a.createElement("span",{onClick:d,className:"moduleName"},t.name),r.a.createElement("div",{className:"moduleBtns"},r.a.createElement("button",{onClick:N,className:"btn viewMarksBtn btnSm"},"View Marks"))))},we=function(){var e=O(),t=e.show,a=e.toggleModal,c=e.hideModal,l=W(),o=l.loading,s=l.index,u=F(),m=u.loadItems,d=u.items,f=u.changeItem,p=u.removeItem,b=u.prependItem,E=u.MoreBtn,v=Object(n.useState)(!1),h=Object(i.a)(v,2),j=h[0],N=h[1];Object(n.useEffect)((function(){j||(m(s),N(!0))}),[s,m,j]);return r.a.createElement("div",{className:"moduleWrapper"},r.a.createElement(le,null,r.a.createElement(g,{onHide:c,show:t},r.a.createElement(J,{onDone:function(e){c(),b(e)},modelName:"module"}))),r.a.createElement("div",{className:"moduleHeader"},r.a.createElement("h2",{className:"moduleHeader"},"Modules"),r.a.createElement(le,null,r.a.createElement("button",{onClick:a,className:"btn"},"Create Module"))),r.a.createElement("div",{className:"moduleList"},o&&r.a.createElement("div",{className:"module"},r.a.createElement("span",{className:"loader"})),!o&&!d.length&&r.a.createElement("p",null,"No modules found"),d.map((function(e){return r.a.createElement(Ne,{onDelete:p,onUpdate:function(t){return f(e,t)},module:e,key:e.name})}))),r.a.createElement(E,null))},ke=function(){var e=Object(n.useState)("student"),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),o=Object(i.a)(l,2),s=o[0],u=o[1],m=p();return Object(n.useEffect)((function(){m&&!s&&("admin"===m.type||"teacher"===m.type?"departments"!==a&&c("department"):"student"===m.type&&"modules"!==a&&c("module"),u(!0))}),[m,a,s]),r.a.createElement("div",null,r.a.createElement("div",{className:"viewBtnWrapper"},r.a.createElement(z,{userTypes:["admin","teacher"]},r.a.createElement("button",{onClick:function(){return c("department")},className:"".concat("department"===a?"active":""," btn viewBtn")},"Departments")),r.a.createElement("button",{onClick:function(){return c("module")},className:"".concat("module"===a?"active":""," btn viewBtn")},"Modules"),r.a.createElement(z,{userTypes:["admin","teacher"]},r.a.createElement("button",{onClick:function(){return c("student")},className:"".concat("student"===a?"active":""," btn viewBtn")},"Students")),r.a.createElement(le,null,r.a.createElement("button",{onClick:function(){return c("teacher")},className:"".concat("teacher"===a?"active":""," btn viewBtn")},"Teachers"))),r.a.createElement(A,{show:""===a},r.a.createElement("h4",null,"Click to view any of those.")),r.a.createElement(z,{userTypes:["admin","teacher"]},r.a.createElement(A,{show:"student"===a,Component:me})),r.a.createElement(le,null,r.a.createElement(A,{show:"teacher"===a,Component:pe})),r.a.createElement(A,{show:"module"===a,Component:we}),r.a.createElement(z,{userTypes:["admin","teacher"]},r.a.createElement(A,{show:"department"===a,Component:ve})))},ye=(a(60),r.a.createContext([])),xe=r.a.createContext(),Ce=function(e){var t=e.children,a=Object(n.useState)([]),c=Object(i.a)(a,2),l=c[0],o=c[1];return r.a.createElement(ye.Provider,{value:l},r.a.createElement(xe.Provider,{value:{appendMsg:function(e){e.id=1e3*Math.random(),o([].concat(Object(N.a)(l),[e]))},prependMsg:function(e){e.id=1e3*Math.random(),o([e].concat(Object(N.a)(l)))},removeMsg:function(e){o(l.filter((function(t){return t.id!==e.id})))},clearAll:function(){o([])}}},t))},Se=(a(61),function(){var e=B(),t=e.loading,a=e.login,n=L("",C("login")),c=n.msg,l=n.fields,o=n.data,i=n.setMsg,m=n.setValue,d=n.errorHandler,f=n.reset,p=M().saveToken,E=b(),v=function(){var e=Object(u.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,a(JSON.stringify(o));case 3:return n=e.sent,e.next=6,n.json();case 6:r=e.sent,n.ok?(c&&i(""),E(r.user),p(r.token),f()):(i((null===r||void 0===r?void 0:r.message)||""),d(r));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"authWrapper"},r.a.createElement("h2",{className:"authHeader"},"Login"),r.a.createElement("form",{className:"authForm"},c&&r.a.createElement("h5",{className:"formMsg danger"},c),r.a.createElement(Y,{setValue:m,fields:l}),r.a.createElement("button",{onClick:v,className:"btn authBtn btnBlock"},t?"Logging in ...":"Login")))});function Me(e){var t=e.children,a=B(),c=a.loading,l=a.currentUser,o=Object(n.useState)(!1),m=Object(i.a)(o,2),d=m[0],f=m[1],E=p(),v=b(),N=O(),w=N.show,k=N.hideModal,y=N.showModal,x=Object(j.g)(),C=Object(j.h)(),S=M().hasToken;return Object(n.useEffect)((function(){S()?E||d||(l().then(function(){var e=Object(u.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok||401!==t.status){e.next=3;break}return"/login"!==C.pathname&&x.push("/login"),e.abrupt("return");case 3:return e.next=5,t.json();case 5:(a=e.sent)?v(a):"/login"!==C.pathname&&x.push("/login");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),f(!0)):"/login"!==C.pathname&&x.push("/login")}),[E,d,C,S,l,x,v]),Object(n.useEffect)((function(){!c&&d||E?k():!w&&y()}),[c,w,E,d,k,y]),Object(n.useEffect)((function(){E&&"/login"===C.pathname&&x.push("/home")}),[E,x,C]),r.a.createElement("main",{className:"appWrapper"},r.a.createElement(g,{show:c,onHide:function(){return null}},r.a.createElement("div",{className:"loginLoader"},r.a.createElement("span",{className:"loader"}))),(E||"/login"===C.pathname)&&r.a.createElement(r.a.Fragment,null,r.a.createElement(h,null),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"contentWrapper"},t)),r.a.createElement("footer",null,r.a.createElement("span",null,"\xa9UR - 2021 | ISHIMWE Valentin"))))}var Ie=function(){return r.a.createElement(E,null,r.a.createElement(Ce,null,r.a.createElement(m.a,null,r.a.createElement(j.d,null,r.a.createElement(j.b,{path:"/home",exact:!0,component:function(){return r.a.createElement(Me,null,r.a.createElement(ae,null))}}),r.a.createElement(j.b,{path:"/view",exact:!0,component:function(){return r.a.createElement(Me,null,r.a.createElement(ke,null))}}),r.a.createElement(j.b,{path:"/Login",exact:!0,component:function(){return r.a.createElement(Me,null,r.a.createElement(Se,null))}}),r.a.createElement(j.b,{path:"/account",exact:!0,component:function(){return r.a.createElement(Me,null,r.a.createElement(ce,null))}}),r.a.createElement(j.a,{to:"/home"})))))};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ie,null)),document.getElementById("root"))}]),[[22,1,2]]]);
//# sourceMappingURL=main.8b83a6e2.chunk.js.map